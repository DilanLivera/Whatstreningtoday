<% include ../partials/header %>
    <div class = "container">
        <div class = "row">
            <div class = "col-12">
                <!-- heading -->
                <h1 class="display-4 text-center">Twitter <a href = "/"><i class="fab fa-twitter "></a></i></h1>
                <!-- search tweets -->
                <form action = "/results" method = "GET" class = "form-inline d-flex-flex justify-content-end">
                    <div class = "form-group">
                        <label><%= searchterm %></label>
                        <input type = "text" placeholder = "search" name = "search" class = "form-control">
                        <button class = "btn btn-primary">Search</button>                        
                    </div>   
                </form>
                <br>
                <!-- display tweets -->
                <% tweets.statuses.forEach((tweet) => { %>
                    <div class="card">
                        <div class="card-header">
                            <!-- user image -->
                            <image src = "<%= tweet.user.profile_image_url %>" class = "rounded"></image>
                             <!-- user name  -->
                            <strong><%= tweet.user.name %></strong>
                            <!-- show user location if it exits -->
                            <span>
                                <% if(tweet.user.location) { %>
                                    - <%= tweet.user.location %>
                                <% } %>                                
                            </span>
                        </div>
                        <div class="card-body">
                            <blockquote class="blockquote mb-0">
                                <!-- show tweet -->
                                <p><%- tweet.text %></p>
                                <!-- show date and time of the tweet -->
                                <footer class="blockquote-footer">
                                    <cite> 
                                        <em><% let date = tweet.created_at.split(" ");
                                            let newDate = `${date[0]} ${date[1]} ${date[2]} ${date[5]} ${date[3]}`; %>
                                            on <%= newDate %>
                                        </em>
                                    </cite>
                                </footer>
                            </blockquote>
                        </div>
                    </div>
                    <br>                    
                <% }) %>                                   
            </div>
        </div>
    </div>



<% include ../partials/footer %>